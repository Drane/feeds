<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h5="http://java.sun.com/jsf/composite/html5"
	xmlns:places="http://java.sun.com/jsf/composite/places">

	<script>
      // event.target is one of the h5:drag elements generated by ui:repeat below
  	  function dragStart(event) {
	  	  var linkref = event.target.firstElementChild.firstElementChild; // anchor
	  	  var link = linkref.href;
	  	  var title = linkref.textContent;

	  	  title.replace(/[\r\n]/g, " ");
		  	   
	  	  var dropzone = $("dropzone"); // h5:drop in dropZone.xhtml
	  	  dropzone.acceptDrop = true;	  	  
	  	  	  	  
	  	  var serverPayload = dropzone.serverPayload();
	  	  if (serverPayload.indexOf(title) != -1)
	  		dropzone.acceptDrop = false; // link already present
	  	  		  	  
	  	  event.dataTransfer.setData('text', title + " | " + link + " ");
	   }
    </script>

	<h:panelGrid columns="1" id="items">
	  <ui:repeat value="#{rssFeed.items}" var="item">

	    <h5:drag ondragstart="dragStart(event)">
		   <p><a href="#{item.link}" draggable="false">#{item.title}</a> <br /></p>
		</h5:drag>

		</ui:repeat>
	</h:panelGrid>

</ui:composition>